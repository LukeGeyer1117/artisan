{% extends 'base.html' %}
{% load static %}

{% block title %}Cart{% endblock %}

{% block extra_head %}
{% endblock %}

{% block content %}

    {% block nav %}
        {% include 'client/components/customer/nav/nav.html' with slug=artisan.slug %}
    {% endblock %}
    <main class="bg-base">
        <!-- To be shown if the cart is empty -->
        <section class="cart-empty w-full flex flex-col justify-center items-center gap-6 h-full">
            <h2 class="text-4xl">Your cart is currently empty</h2>
            <a href="{% url 'shop' artisan.slug %}" class="btn btn-primary btn-outline">Browse the Shop</a>
        </section>

        <!-- To be shown if the cart is not empty -->
        <section class="cart-contents hidden flex flex-col lg:flex-row h-[80vh]">
            <div class="w-full lg:w-2/3 p-4 pr-0">
                <h2 class="text-3xl">Your Cart</h2>
                <div class="divider"></div>
                <div class="cart-items-list flex flex-col gap-4 w-full max-h-[70vh] overflow-y-scroll" id="cart-items-list">
                    <!-- JavaScript will populate cart items here -->
                </div>
            </div>
            <div class="divider divider-horizontal m-0"></div>
            <div class="cart-total-section w-full lg:w-1/3 mx-auto h-full flex flex-col justify-start absolute sticky top-12">
                <div class="card bg-base-100 w-full h-full">
                    <div class="card-body space-y-4 h-full">

                    <h3 class="card-title text-xl">
                        Order Summary
                    </h3>

                    <!-- Subtotal -->
                    <div class="flex justify-between text-base">
                        <span class="opacity-70">Subtotal</span>
                        <span class="font-medium">
                        $<span id="cart-total">0.00</span>
                        </span>
                    </div>

                    <!-- Tax placeholder -->
                    <div class="flex justify-between text-base opacity-70">
                        <span>Estimated Tax</span>
                        <span>Calculated at checkout</span>
                    </div>

                    <!-- Shipping placeholder -->
                    <div class="flex justify-between text-base opacity-70">
                        <span>Shipping</span>
                        <span>Calculated at checkout</span>
                    </div>

                    <div class="divider"></div>

                    <!-- Total -->
                    <div class="flex justify-between text-lg font-semibold">
                        <span>Total</span>
                        <span>$<span id="cart-grand-total">0.00</span></span>
                    </div>

                    <!-- Checkout CTA -->
                    <div class="card-actions mt-4">
                        <button class="checkout-btn btn btn-primary btn-lg w-full">
                        Proceed to Checkout
                        </button>
                    </div>

                    <!-- Trust / reassurance -->
                    <p class="text-sm text-center opacity-60">
                        Secure checkout â€¢ Powered by Troute
                    </p>

                    </div>
                </div>
            </div>
        </section>
    </main>
    {% block footer %}
        {% include 'client/components/customer/footer/footer.html' with slug=artisan.slug %}
    {% endblock %}

    <template id="cart-item-template">
        <div class="card card-side w-full h-fit cart-item" data-value="0">
            <div class="prod-id hidden"></div>
            <figure class="w-32 h-32 flex-shrink-0">
                <img
                class="object-cover w-full h-full"
                />
            </figure>

            <div class="card-body p-4 py-2 flex flex-col justify-between">
                <div class="flex justify-between items-start gap-4">
                    <div>
                        <h3 class="card-title text-lg md:text-xl"></h3>
                        <p class="card-price text-sm opacity-70"></p>
                    </div>

                    <div class="text-right">

                    </div>
                    <div class="flex ">
                        <button class="btn btn-sm btn-error btn-outline remove-btn">
                            <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                        </button>

                    </div>
                </div>

                <div class="card-actions justify-between items-center mt-2">

                    <!-- Quantity editor -->
                    <div class="join qty-editor">
                        <button class="btn btn-sm btn-neutral join-item rounded-r-none shadow-none minus">&minus;</button>
                        <input
                            type="number"
                            min="1"
                            class="input input-sm input-bordered w-fit text-center change-qty rounded-r-none"
                        />
                        <button class="btn btn-sm btn-neutral join-item rounded-l-none shadow-none plus">&plus;</button>
                    </div>

                    <div class="item-total-price text-lg font-semibold"></div>
                </div>
            </div>
        </div>
    </template>

    
{% endblock %}

{% block extra_scripts %}
    <script type="module" src="{% static 'customer/scripts/cart.js' %}"></script>
{% endblock %}