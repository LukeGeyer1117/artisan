{% extends 'merch_base.html' %}
{% load static %}

{% block title %}Merchant Dashboard{% endblock %}

{% block extra_head %}
{% endblock %}

{% block content %}
  <!-- NAV -->
  {% block nav %}
    {% include 'client/components/merchant/merch-nav/nav.html' with slug=artisan.slug %}
  {% endblock nav %}

  <!-- MAIN -->
  <main class="dashboard-main flex flex-col md:flex-row p-0 h-max-screen">

    <!-- SIDEBAR -->
    {% block side-links %}
      {% include 'client/components/merchant/side-links/side-links.html' with slug=artisan.slug %}
    {% endblock side-links %}

    <!-- CONTENT -->
    <div class="flex flex-col w-full gap-6 p-4">

      <!-- LEFT COLUMN -->
      <section class="flex flex-col gap-6 flex-1">

        <select id="timeframe" class="select select-sm select-bordered">
          <option value="3">3 Days</option>
          <option value="7" selected>Past Week</option>
          <option value="30">Past Month</option>
        </select>

        <!-- STATS -->
        <div class="stats w-full h-fit shadow-sm">
          <div class="stat" id="sales-amount">
            <div class="stat-title">Total Sales</div>
            <div class="stat-value"></div>
          </div>

          <div class="stat" id="sales-volume">
            <div class="stat-title">Completed Orders</div>
            <div class="stat-value"></div>
            <div class="stat-desc">in the past week</div>
          </div>
        </div>

        <div class="flex flex-col md:flex-row gap-4 w-full">
          <!-- ANALYTICS CARD -->
          <div id="analytics-card" class="card bg-base-100 shadow-md p-4 w-full md:w-[85%]">
            <div class="chart-header flex justify-between items-center mb-2">
              <h3 class="text-lg font-semibold">Order Analytics</h3>
            </div>

            <div class="flex flex-col md:flex-row">
              <div class="relative w-full md:w-1/2 h-100">
                <canvas id="sales-chart"></canvas>
              </div>

              <div class="relative w-full md:w-1/2 h-100">
                <canvas id="revenue-chart"></canvas>
              </div>
            </div>

          </div>

          <div class="stats md:stats-vertical w-full md:w-[15%] shadow">

            <div class="stat" id="pending-orders">
              <div class="stat-title">Pending Orders</div>
              <div class="stat-value"></div>
              <div class="stat-desc">Need Approved</div>
            </div>

            <div class="stat" id="incomplete-orders">
              <div class="stat-title">Incomplete Orders</div>
              <div class="stat-value"></div>
              <div class="stat-desc">Need Completed</div>
            </div>

            <div class="stat" id="custom-requests">
              <div class="stat-title">Custom Requests</div>
              <div class="stat-value"></div>
              <div class="stat-desc">Approve or Decline</div>
            </div>

          </div>
        </div>
      </section>

    </div>

    {% block chat %}
      {% include 'client/components/merchant/chat.html' %}
    {% endblock %}

  </main>
{% endblock %}

{% block extra_scripts %}
<script type="module" src="{% static 'merchant/scripts/dashboard.js' %}"></script>

<script>
  const window_location = "Dashboard";
  const active_URL = "/media/icons/active/dashboard_purple.svg";
</script>

<script type="module" src="{% static 'merchant/scripts/common.js' %}"></script>
{% endblock %}
