{% extends 'merch_base.html' %}
{% load static %}

{% block title %}Merchant Login{% endblock %}

{% block extra_head %}
{% endblock %}

{% block content %}
  <main class="flex flex-row">
    
    <!-- Form Section -->
    <section class="w-full flex flex-col items-center justify-center h-screen">

      <form id="login-form" class="flex flex-col justify-between gap-10 items-center w-full">
        <span class="text-rotate text-3xl text-primary">
          <span class="justify-items-center">
            <span>Manage Your Store</span>
            <span>Grow Your Business</span>
            <span>Sell With Confidence</span>
          </span>
        </span>
        <fieldset class="fieldset bg-base-200 border-base-300 rounded-box w-sm border p-4">
          <legend class="fieldset-legend text-base">Login</legend>

          <div class="flex flex-col gap-4 mt-4 mb-4">
            <label class="input validator w-full">
              <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
              <input id="login-email" type="email" placeholder="mail@site.com" required>
            </label>

            <label class="input validator w-full">
              <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"></path></svg>
              <input id="login-password" type="password" placeholder="secret_key" required>
            </label>
            <div class="flex flex-row w-full justify-between items-center">
              <div class="flex flex-row gap-2">
                <input type="checkbox" class="checkbox checkbox-sm">
                <p class="text-sm">Remember Me</p>
              </div>
              <a href="/password-reset/" class="text-primary text-sm">Forgot password?</a>
            </div>
          </div>

          <button class="btn btn-neutral mt-4 hover:bg-primary">Login</button>
        </fieldset>
        <p class="text-sm text-center">Don't have an account? <a href="" class="text-primary underline" data-toggle-form="signup">Register</a> now.</p>
      </form>

      <form id="signup-form" class="flex flex-col gap-10 justify-between hidden" novalidate>
        <!-- Rotating Header -->
        <span class="text-rotate text-3xl text-primary">
          <span class="justify-items-center">
            <span>Start Your Merchant Journey</span>
            <span>Build Your Brand</span>
            <span>Sell With Confidence</span>
          </span>
        </span>

        <fieldset class="fieldset bg-base-200 border-base-300 rounded-box w-full border p-4">
          <legend class="fieldset-legend text-base">Create Account</legend>

          <div class="flex flex-col gap-2 mt-4 mb-4">

            <!-- Full Name -->
            <label class="input validator w-full">
              <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
              <input
                id="signup-name"
                name="name"
                type="text"
                placeholder="Full Name"
                required
                autocomplete="name"
                minlength="2"
                aria-label="Full name">
            </label>

            <!-- Username -->
            <label class="input validator w-full">
              <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="20" y1="8" x2="20" y2="14"></line><line x1="23" y1="11" x2="17" y2="11"></line></svg>
              <input
                id="signup-username"
                name="username"
                type="text"
                placeholder="Username"
                required
                pattern="^[a-zA-Z0-9_]{3,20}$"
                autocomplete="username"
                aria-label="Username">
            </label>

            <!-- Email -->
            <label class="input validator w-full">
              <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
              <input
                id="signup-email"
                name="email"
                type="email"
                placeholder="mail@site.com"
                required
                autocomplete="email"
                aria-label="Email address">
            </label>

            <!-- Phone -->
            <label class="input validator w-full">
              <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>
              <input
                id="signup-phone"
                name="phone"
                type="tel"
                placeholder="Phone Number"
                required
                pattern="^\+?[0-9]{10,15}$"
                autocomplete="tel"
                aria-label="Phone number">
            </label>

            <!-- Password -->
            <label class="input validator w-full">
              <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"></path></svg>
              <input
                id="signup-password"
                name="password"
                type="password"
                placeholder="Password (min 8 chars)"
                required
                minlength="8"
                autocomplete="new-password"
                aria-label="Password">
            </label>

            <label class="input validator w-full">
              <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
              <input
                id="confirm-password"
                name="password"
                type="password"
                placeholder="Confirm Password"
                required
                minlength="8"
                autocomplete="new-password"
                aria-label="Password">
            </label>

            <!-- Shop Name -->
            <label class="input validator w-full">
              <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
              <input
                id="signup-shop-name"
                name="shop_name"
                type="text"
                placeholder="Shop Name"
                required
                minlength="2"
                autocomplete="organization"
                aria-label="Shop name">
            </label>

          </div>

          <button class="btn btn-neutral mt-4 hover:bg-primary">
            Create Account
          </button>
        </fieldset>

        <p class="text-sm text-center">
          Already have an account?
          <a href="#" class="text-primary underline" data-toggle-form="login">
            Log in
          </a>
        </p>
      </form>

    </section>

  </main>
{% endblock %}

{% block extra_scripts %}
  <script>
    // Form Toggle Logic
    (function() {
      const loginForm = document.getElementById('login-form');
      const signupForm = document.getElementById('signup-form');
      const toggleLinks = document.querySelectorAll('[data-toggle-form]');

      toggleLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const targetForm = this.getAttribute('data-toggle-form');
          
          if (targetForm === 'signup') {
            loginForm.classList.add('hidden');
            signupForm.classList.remove('hidden');
            signupForm.querySelector('input').focus();
          } else {
            signupForm.classList.add('hidden');
            loginForm.classList.remove('hidden');
            loginForm.querySelector('input').focus();
          }
        });
      });
    })();
  </script>
  <script type="module" src="{% static 'merchant/scripts/login.js' %}"></script>
{% endblock %}